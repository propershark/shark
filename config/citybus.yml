# The namespace prefix used for websocket channel names
namespace: com.propershark.citybus
# All of the managers needed to cover the services provided by this agency
managers:
  # The ObjectManager for maintaining route information
  route_manager:
    type: Route
    update_frequency: 1d
    namespace: routes
    sources:
      # A source object to be instantiated. The key is the fully-qualified name
      # of the source class to be instantiated, the value is a hash of
      # arguments to pass to the initializer as keyword arguments.
      DoubleMap::RouteSource:
        agency:       citybus
        key:          short_name
        station_key:  stop_code
      CityBus::RouteSource:
        key:          short_name

  # The ObjectManager for maintaining vehicle information
  vehicle_manager:
    # The type of object this manager maintains. All objects passed through
    # this manager are assumed to be of this type
    type: Vehicle
    # How often updates for this agency will be published
    update_frequency: 2s
    # Appended to the agency namespace, the namespace prefix used for vehicle
    # channel names
    namespace: vehicles
    # The list of sources that this manager will poll every update
    sources:
      DoubleMap::VehicleSource:
        agency:       citybus
        key:          name
        route_key:    short_name
        station_key:  stop_code
      CityBus::VehicleSource:
        key:          name
        route_key:    short_name
        station_key:  stop_code

  # The ObjectManager for maintaining station information
  station_manager:
    type: Station
    update_frequency: 1d
    namespace: stations
    sources:
      DoubleMap::StationSource:
        agency:   citybus
        key:      stop_code
      CityBus::StationSource:
        key:      stop_code
